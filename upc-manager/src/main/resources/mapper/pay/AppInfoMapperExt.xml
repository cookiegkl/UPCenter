<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.hanzhdy.manager.pay.mapper.AppInfoMapperExt">

    <select id="countAsList" parameterType="java.util.HashMap" resultType="int">
        SELECT COUNT(1) FROM app_info a
        <include refid="selectAsList_wherecause"></include>
    </select>

    <select id="selectAsList" parameterType="java.util.HashMap" resultType="org.hanzhdy.manager.pay.vo.AppInfoVo">
        <include refid="Pageable_Prefix"/>
        SELECT
        a.APP_ID AS appId,
        a.APIKEY AS apikey,
        a.APP_NAME AS appName,
        a.WHITE_LIST AS whiteList,
        a.STATUS AS status
        FROM
        app_info a
        <include refid="selectAsList_wherecause"></include>
        <include refid="Pageable_Suffix"/>
    </select>

    <sql id="selectAsList_wherecause">
        <where>
            <if test="searchkey!=null and searchkey!=''">
                AND (a.APP_ID LIKE #{searchkey} OR APP_NAME LIKE #{searchkey})
            </if>
            <if test="appId!=null and appId!=''">
                AND a.APP_ID LIKE #{appId}
            </if>
            <if test="apikey!=null and apikey!=''">
                AND a.APIKEY LIKE #{apikey}
            </if>
            <if test="appName!=null and appName!=''">
                AND a.APP_NAME LIKE #{appName}
            </if>
            <if test="whiteList!=null and whiteList!=''">
                AND a.WHITE_LIST LIKE #{whiteList}
            </if>
            <if test="status!=null">
                AND a.STATUS = #{status}
            </if>
        </where>
    </sql>

    <insert id="insertSelectiveExt" parameterType="org.hanzhdy.manager.pay.model.AppInfo" useGeneratedKeys="true"
            keyProperty="appId">
        <!--
          WARNING - @mbggenerated
          This element is automatically generated by MyBatis Generator, do not modify.
        -->
        insert into app_info
        <trim prefix="(" suffix=")" suffixOverrides=",">
            <if test="appId != null">
                APP_ID,
            </if>
            <if test="apikey != null">
                APIKEY,
            </if>
            <if test="appName != null">
                APP_NAME,
            </if>
            <if test="whiteList != null">
                WHITE_LIST,
            </if>
            <if test="status != null">
                STATUS,
            </if>
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides=",">
            <if test="appId != null">
                #{appId,jdbcType=VARCHAR},
            </if>
            <if test="apikey != null">
                #{apikey,jdbcType=VARCHAR},
            </if>
            <if test="appName != null">
                #{appName,jdbcType=VARCHAR},
            </if>
            <if test="whiteList != null">
                #{whiteList,jdbcType=VARCHAR},
            </if>
            <if test="status != null">
                #{status,jdbcType=VARCHAR},
            </if>
        </trim>
    </insert>

    <update id="updateByOldAppIdSelective" parameterType="map">

        update app_info
        <set>
            <if test="appId != null and appId!=''">
                APP_ID = #{appId,jdbcType=VARCHAR},
            </if>
            <if test="apikey != null and apikey!=''">
                APIKEY = #{apikey,jdbcType=VARCHAR},
            </if>
            <if test="appName != null and appName!=''">
                APP_NAME = #{appName,jdbcType=VARCHAR},
            </if>
            <if test="whiteList != null and whiteList!=''">
                WHITE_LIST = #{whiteList,jdbcType=VARCHAR},
            </if>
            <if test="status != null and status !=''">
                STATUS = #{status,jdbcType=VARCHAR},
            </if>
        </set>

        where APP_ID = #{oldAppId,jdbcType=VARCHAR}

<!--        <where>
            <if test="oldAppId!=null and oldAppId!=''">
                AND APP_ID = #{oldAppId}
            </if>
            <if test="apikey!=null and apikey!=''">
                AND APIKEY = #{apikey}
            </if>
            <if test="appName!=null and appName!=''">
                AND APP_NAME = #{appName}
            </if>
            <if test="whiteList!=null and whiteList!=''">
                AND WHITE_LIST = #{whiteList}
            </if>
            <if test="status!=null and status !=''">
                AND STATUS = #{status}
            </if>
        </where>-->
    </update>
</mapper>